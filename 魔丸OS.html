<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8" />
<title>è£…å¸è´§åœº-ç°ä»£</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
<style>
:root{
  --theme:linear-gradient(135deg,#667eea 0%,#764ba2 100%);
  --radius:12px;
  --gap:15px;
  font-family:"Microsoft YaHei",sans-serif;
}
body{margin:0;height:100vh;display:flex;flex-direction:column;
    background:var(--theme);color:#fff;} 
header{padding:15px;font-size:22px;
    text-align:center;background:rgba(0,0,0,.15);}
.main{flex:1;display:flex;
    padding:var(--gap);gap:var(--gap);overflow:hidden;}
aside{width:280px;background:rgba(255,255,255,.95);
    border-radius:var(--radius);padding:var(--gap);display:flex;
    flex-direction:column;gap:10px;
    box-shadow:0 4px 20px rgba(0,0,0,.2);}
button{cursor:pointer;border:none;
    border-radius:8px;padding:12px;font-size:16px;transition:.25s;}
.btn-prim{background:#4CAF50;color:#fff;}
.btn-prim:hover{background:#45a049;}
.btn-warn{background:#ff9800;color:#fff;}
.btn-warn:hover{background:#fb8c00;}
.btn-danger{background:#f44336;color:#fff;}
.btn-danger:hover{background:#e53935;}
.content{flex:1;background:rgba(255,255,255,.95);
    border-radius:var(--radius);padding:var(--gap);
    color:#333;
    display:flex;flex-direction:column;
    align-items:center;justify-content:center;
    position:relative;
    box-shadow:0 4px 20px rgba(0,0,0,.2);}
.hidden{display:none !important;}
h2{margin:0 0 15px;text-align:center;}
textarea{width:100%;height:120px;
    resize:none;padding:8px;border:1px solid #ccc;
    border-radius:var(--radius);}
input[type=file]{display:none;}
.list{max-height:180px;overflow:auto;border:1px solid #ddd;
    border-radius:var(--radius);padding:5px;margin:5px 0;}
.list div{display:flex;justify-content:space-between;
    align-items:center;padding:4px 6px;border-bottom:1px solid #eee;}
.list div:last-child{border:none}
.big{font-size:56px;font-weight:bold;margin:15px 0;}
.timer-controls{display:flex;gap:10px;flex-wrap:wrap;justify-content:center;}
.timer-input{display:flex;gap:8px;align-items:center;}
.timer-input input{width:60px;padding:6px;
    border:1px solid #ccc;border-radius:5px;text-align:center;}

/* === å¿«æ·å·¥å…·åˆ†ç±» === */
.url-cols{width:100%;max-width:720px;
    display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));
    gap:var(--gap);}
.url-col{background:rgba(255,255,255,.9);
    border-radius:var(--radius);padding:12px;}
.url-col h4{margin:0 0 10px;color:#555;}
.url-col button{width:100%;margin-bottom:8px;
    background:#2196F3;color:#fff;}
.url-col button:hover{background:#0b7dda;}
</style>
</head>
<body>
<header>è£…å¸è´§åœº-ç°ä»£</header>
<div class="main">
  <aside>
    <button class="btn-prim" onclick="show('roll')">æŠ½å¡(ç‚¹å)</button>
    <button class="btn-warn" onclick="show('alarm')">é—¹é’Ÿ</button>
    <button class="btn-prim" onclick="show('timer')">é¸¡å±å™¨</button>
    <button class="btn-prim" onclick="show('urls')">å­¦ç§‘å·¥å…·</button>
    <button class="btn-danger" onclick="clearAll()">ä½ ä¸è®¸ç‚¹</button>
  </aside>

  <div class="content">
    <!-- 1. ç‚¹å -->
    <div id="roll" class="panel">
      <h2>æˆéƒ½ä¸ƒä¸­åŒæ¬¾æ‘‡å·</h2>
      <textarea id="stuInput" placeholder="ç²˜è´´æˆ–è¾“å…¥å§“åï¼Œç”¨é€—å·/æ¢è¡Œåˆ†éš”"></textarea>
      <div style="display:flex;gap:10px;margin-top:8px;">
        <button class="btn-prim" onclick="importNames()">å¯¼å…¥åå•</button>
        <button class="btn-prim" onclick="addOne()">å•æ¡æ·»åŠ </button>
        <button class="btn-warn" onclick="downloadList()">ä¸‹è½½åå•</button>
        <label for="uploadFile" class="btn-warn" style="padding:12px;border-radius:8px;">ä¸Šä¼ åå•</label>
        <input type="file" id="uploadFile" accept=".txt,.csv" onchange="uploadList(this)">
      </div>
      <div class="list" id="stuList"></div>
      <div id="picked" class="big" style="color:#4CAF50;">æŠ½ä¸€ä¸ªï¼</div>
      <button class="btn-prim" style="font-size:20px;padding:15px 30px;" onclick="startRoll()">æŠ½å¡æ¥</button>
    </div>

    <!-- 2. é—¹é’Ÿ -->
    <div id="alarm" class="panel hidden">
      <h2>é—¹é’Ÿ</h2>
      <div style="font-size:52px;font-weight:bold;" id="clock">00:00:00</div>
      <div style="display:flex;gap:10px;align-items:center;">
        <input type="time" id="alarmTime">
        <input type="text" id="alarmName" placeholder="é—¹é’Ÿåç§°ï¼ˆå¯é€‰ï¼‰">
        <button class="btn-prim" onclick="addAlarm()">æ·»åŠ </button>
      </div>
      <div class="list" id="alarmList"></div>
    </div>

    <!-- 3. è®¡æ—¶å™¨ -->
    <div id="timer" class="panel hidden">
      <h2>è®¡æ—¶å™¨</h2>
      <div class="big" id="timerDisplay">00:00:00</div>
      <div class="timer-input">
        <label>åˆ†é’Ÿ<input type="number" id="min" min="0" max="99" value="5"></label>
        <label>ç§’é’Ÿ<input type="number" id="sec" min="0" max="59" value="0"></label>
        <button class="btn-prim" onclick="setCountdown()">åº”ç”¨é¸¡å±</button>
      </div>
      <div class="timer-controls">
        <button class="btn-prim" onclick="startTimer()">GO!/ç­‰ä¸€ä¸‹ï¼</button>
        <button class="btn-warn" onclick="pauseTimer()">åœï¼</button>
        <button class="btn-danger" onclick="resetTimer()">é‡æ–°æ¥</button>
        <button class="btn-prim" onclick="switchMode()"><span id="modeText">åˆ‡æ¢åˆ°æ­£é¸¡å±</span></button>
      </div>
    </div>

    <!-- 4. å¿«æ·å·¥å…· -->
    <div id="urls" class="panel hidden">
      <h2>çœ‹çœ‹æœ‰å•¥èƒ½ç”¨çš„</h2>
      <div class="url-cols">
        <div class="url-col">
          <h4>AI</h4>
          <button onclick="openUrl('https://www.doubao.com/chat')">å”åŒ…</button>
          <button onclick="openUrl('https://kimi.moonshot.cn')">Kimi</button>
          <button onclick="openUrl('https://tongyi.aliyun.com/qianwen')">é€šä¹‰</button>
          <button onclick="openUrl('https://deepseek.com')">DeepSick</button>
        </div>
        <div class="url-col">
          <h4>è¯­æ–‡</h4>
          <button onclick="openUrl('https://www.zidian.com.cn/ci')">è¯å…¸</button>
          <button onclick="openUrl('https://hanyucidian.org/gudai-hanyu-da-cidian')">å¤æ±‰è¯­è¯å…¸</button>
          <button onclick="openUrl('https://www.gushiwen.cn/')">å¤è¯—æ–‡å·¥å…·</button>
        </div>
        <div class="url-col">
          <h4>æ•°å­¦</h4>
          <button onclick="openUrl('https://www.desmos.com/calculator')">Desmos</button>
          <button onclick="openUrl('https://www.geogebra.org/graphing')">GeoGebra</button>
          <button onclick="openUrl('https://calculator.advernesia.com/zh/')">å¯„ç®—å™¨</button>
        </div>
        <div class="url-col">
          <h4>è‹±è¯­</h4>
          <button onclick="openUrl('https://dict.cn')">è¯æµ·</button>
          <button onclick="openUrl('https://paper.i21st.cn/')">21ä¸–çºªæŠ¥çº¸å·¥å…·</button>
        </div>
        <div class="url-col">
          <h4>ä¸çŸ¥é“</h4>
          <button onclick="openUrl('https://wl-app.nobook.com/')">ç‰›é€¼ç‰©ç†å®éªŒå®¤</button>
          <button onclick="openUrl('https://hx-app.nobook.com/')">ç‰›é€¼åŒ–å­¦å®éªŒå®¤</button>
        </div>
        <div class="url-col">
          <h4>ç‚¹å‡»è¾“å…¥æ–‡æœ¬</h4>
          <button onclick="openUrl('https://wxyz.fuulea.com/')">è¾…ç«‹è¯¾</button>
          <button onclick="openUrl('https://ys.mihoyo.com/')">åŸç¥</button>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
/* ====== é€šç”¨ ====== */
const panels=document.querySelectorAll('.panel');
function show(id)
{
    panels.forEach(p=>p.classList.add('hidden'));
    document.getElementById(id).classList.remove('hidden');
}
function clearAll()
{
    if(confirm('éƒ½è¯´äº†ä¸è®©ä½ ç‚¹'))
    {
        localStorage.clear();
        location.reload();
    }
}
function openUrl(u)
{
    window.open(u,'_blank');
}

/* ====== ç‚¹å ===== */
let stuArr=[];
function saveStu()
{
    localStorage.setItem('stulist',JSON.stringify(stuArr));
}
function loadStu()
{
    const s=localStorage.getItem('stulist');
    if(s)
    {
        stuArr=JSON.parse(s);
        renderStu();
    }
}
function importNames()
{
    const v=document.getElementById('stuInput').value;
    if(!v.trim())return alert('å‘Šè¯‰æˆ‘å§“å');
    const arr=v.split(/[,ï¼Œ\n\r]+/).map(n=>n.trim()).filter(n=>n);
  stuArr=[...new Set([...stuArr,...arr])];
  saveStu();renderStu();
  document.getElementById('stuInput').value='';
}
function addOne()
{
    const n=prompt('å‘Šè¯‰æˆ‘å§“åï¼š');
    if(!n)return;
    stuArr.push(n);
    saveStu();
    renderStu();
}
function delStu(i)
{
    stuArr.splice(i,1);
    saveStu();
    renderStu();
}
function renderStu()
{
    const box=document.getElementById('stuList');
    box.innerHTML='';
    stuArr.forEach
    (
      (n,i)=>box.insertAdjacentHTML
      (
    'beforeend',
    `<div><span>${n}</span><button class="btn-danger" onclick="delStu(${i})">åˆ </button></div>`
      )
    );
}
function downloadList(){
  if(!stuArr.length)return alert('å•¥ä¹Ÿæ²¡æœ‰');
  const blob=new Blob([stuArr.join('\n')],{type:'text/plain'});
  const a=document.createElement('a');
  a.href=URL.createObjectURL(blob);
  a.download='å­¦ç”Ÿåå•.txt';
  a.click();
}
function uploadList(inp){
  const f=inp.files[0];if(!f)return;
  const r=new FileReader();
  r.onload=e=>{stuArr=[...new Set(e.target.result.split(/\r?\n/).map(n=>n.trim()).filter(n=>n))];
    saveStu();renderStu();};
  r.readAsText(f);
}

let rollHistory = [];
const MAX_HISTORY = 5;
function startRoll() 
{
  if (!stuArr.length) return alert('é‚£ä¹Ÿæ²¡åè®©æˆ‘ç‚¹å•Š');
  const el = document.getElementById('picked');
  let c = 0;
  const t = setInterval(() => 
  {
    const available = stuArr.filter(name => !rollHistory.includes(name));
    const candidates = available.length > 0 ? available : stuArr;
    el.textContent = candidates[Math.floor(Math.random() * candidates.length)];
    if (++c > 20) 
    {
      clearInterval(t);
      const result = el.textContent;
      el.textContent = 'é¢—ç§’ğŸ˜˜ï¼š' + result;
      rollHistory.push(result);
      if (rollHistory.length > MAX_HISTORY) 
      {
        rollHistory.shift();
      }
    }
  }, 100);
}


/* ====== é—¹é’Ÿ ===== */
let alarms=JSON.parse(localStorage.getItem('alarms')||'[]');
function saveAlarm(){localStorage.setItem('alarms',JSON.stringify(alarms));}
function addAlarm(){
  const time=document.getElementById('alarmTime').value;
  const name=document.getElementById('alarmName').value||time;
  if(!time)return alert('å‡ ç‚¹å‡ åˆ†...');
  alarms.push({time,name,id:Date.now()});
  saveAlarm();renderAlarm();
  document.getElementById('alarmTime').value='';document.getElementById('alarmName').value='';
}
function delAlarm(id){alarms=alarms.filter(a=>a.id!==id);saveAlarm();renderAlarm();}
function renderAlarm(){
  const box=document.getElementById('alarmList');
  box.innerHTML=alarms.map(
    a=>`<div><span>${a.name}</span><button class="btn-danger" onclick="delAlarm(${a.id})">åˆ </button></div>`
    ).join('');
}
function checkAlarm(){
  const now=new Date();
  const t=now.toTimeString().slice(0,5);
  alarms.forEach(a=>{if(a.time===t){alert(`â°oi!${a.name}`);delAlarm(a.id);}});
}
function updateClock()
{
    const n=new Date();
    document.getElementById('clock').textContent=n.toLocaleTimeString('zh-CN',{hour12:false});
    checkAlarm();
}

/* ====== è®¡æ—¶å™¨ ===== */
let timerMode='down',timerSec=0,timerInterval=null,timerRunning=false;
function switchMode(){
  timerMode=timerMode==='down'?'up':'down';
  document.getElementById('modeText').textContent=timerMode==='down'?'åˆ‡æ¢åˆ°æ­£é¸¡å±':'åˆ‡æ¢åˆ°å€’é¸¡å±';
  resetTimer();
}
function setCountdown(){
  const m=parseInt(document.getElementById('min').value)||0;
  const s=parseInt(document.getElementById('sec').value)||0;
  timerSec=m*60+s;
  renderTimer();
}
function renderTimer(){
  const h=String(Math.floor(timerSec/3600)).padStart(2,'0');
  const m=String(Math.floor(timerSec%3600/60)).padStart(2,'0');
  const s=String(timerSec%60).padStart(2,'0');
  document.getElementById('timerDisplay').textContent=`${h}:${m}:${s}`;
}
function startTimer(){
  if(timerRunning)return;
  timerRunning=true;
  timerInterval=setInterval(()=>{
    if(timerMode==='down')
    {
        timerSec--;
        if(timerSec<=0)
        {
            clearInterval(timerInterval);
            timerRunning=false;
            alert('å€’é¸¡å±ç»“æŸï¼');
            timerSec=0;
        }
    }
    else{timerSec++;}
    renderTimer();
  },1000);
}
function pauseTimer(){clearInterval(timerInterval);timerRunning=false;}
function resetTimer(){clearInterval(timerInterval);timerRunning=false;timerSec=0;renderTimer();}

/* ====== åˆå§‹åŒ– ===== */
loadStu();renderAlarm();renderTimer();setInterval(updateClock,1000);
</script>
</body>
</html>